(()=>{var e={};e.id=113,e.ids=[113],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},68440:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>c,originalPathname:()=>u,pages:()=>p,routeModule:()=>h,tree:()=>l}),a(84755),a(11506),a(35866);var s=a(23191),i=a(88716),r=a(37922),n=a.n(r),d=a(95231),o={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>d[e]);a.d(t,o);let l=["",{children:["admin",{children:["siswa",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,84755)),"D:\\rapor-digital\\rapor-digital\\app\\admin\\siswa\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,11506)),"D:\\rapor-digital\\rapor-digital\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],p=["D:\\rapor-digital\\rapor-digital\\app\\admin\\siswa\\page.tsx"],u="/admin/siswa/page",c={require:a,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/admin/siswa/page",pathname:"/admin/siswa",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},68112:(e,t,a)=>{Promise.resolve().then(a.bind(a,8984))},88236:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,12994,23)),Promise.resolve().then(a.t.bind(a,96114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,79671,23)),Promise.resolve().then(a.t.bind(a,41868,23)),Promise.resolve().then(a.t.bind(a,84759,23))},35303:()=>{},8984:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var s=a(10326),i=a(17577),r=a(59872);function n(){let[e,t]=(0,i.useState)([]),[a,n]=(0,i.useState)(""),[d,o]=(0,i.useState)(""),[l,p]=(0,i.useState)(void 0),[u,c]=(0,i.useState)(""),[h,m]=(0,i.useState)(null);async function x(){let e=await (0,r.S)("/api/admin/students");t((await e.json()).students||[])}async function g(){if(!d||!a)return alert("Isi NISN & Nama");if(h){if(!(await (0,r.S)("/api/admin/students",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentId:h,name:a,nisn:d,classId:l,password:u||void 0})})).ok)return alert("Gagal update")}else if(!(await (0,r.S)("/api/admin/students",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,nisn:d,classId:l,password:u||"siswa123"})})).ok)return alert("Gagal tambah");n(""),o(""),p(void 0),c(""),m(null),x()}async function f(e){if(confirm("Hapus siswa beserta akun?")){if(!(await (0,r.S)("/api/admin/students",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentId:e})})).ok)return alert("Gagal hapus");x()}}return(0,s.jsxs)("div",{style:{padding:24},children:[s.jsx("h2",{children:"Pengelola Siswa"}),(0,s.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(5,1fr)",gap:8,margin:"12px 0"},children:[s.jsx("input",{placeholder:"Nama Siswa",value:a,onChange:e=>n(e.target.value)}),s.jsx("input",{placeholder:"NISN",value:d,onChange:e=>o(e.target.value)}),s.jsx("input",{placeholder:"ClassId (opsional)",value:l??"",onChange:e=>p(e.target.value?Number(e.target.value):void 0)}),s.jsx("input",{placeholder:"Password (opsional)",type:"password",value:u,onChange:e=>c(e.target.value)}),(0,s.jsxs)("div",{children:[s.jsx("button",{onClick:g,children:h?"Update":"Tambah"}),h&&s.jsx("button",{onClick:()=>{m(null),n(""),o(""),p(void 0),c("")},children:"Batal"})]})]}),(0,s.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[s.jsx("thead",{children:(0,s.jsxs)("tr",{children:[s.jsx("th",{style:{borderBottom:"1px solid #ddd"},children:"Nama"}),s.jsx("th",{style:{borderBottom:"1px solid #ddd"},children:"NISN"}),s.jsx("th",{style:{borderBottom:"1px solid #ddd"},children:"Kelas"}),s.jsx("th",{style:{borderBottom:"1px solid #ddd"},children:"Aksi"})]})}),s.jsx("tbody",{children:e.map(e=>(0,s.jsxs)("tr",{children:[s.jsx("td",{style:{borderBottom:"1px solid #f0f0f0"},children:e.user.name}),s.jsx("td",{style:{borderBottom:"1px solid #f0f0f0"},children:e.nisn}),s.jsx("td",{style:{borderBottom:"1px solid #f0f0f0"},children:e.class?.name||"-"}),(0,s.jsxs)("td",{style:{borderBottom:"1px solid #f0f0f0"},children:[s.jsx("button",{onClick:()=>{m(e.id),n(e.user.name),o(e.nisn),p(e.class?.id),c("")},children:"Edit"})," ",s.jsx("button",{onClick:()=>f(e.id),children:"Hapus"})]})]},e.id))})]})]})}},59872:(e,t,a)=>{"use strict";async function s(e,t={}){let a=new Headers(t.headers||{});return fetch(e,{...t,headers:a})}a.d(t,{S:()=>s})},84755:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(68570).createProxy)(String.raw`D:\rapor-digital\rapor-digital\app\admin\siswa\page.tsx#default`)},11506:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r,metadata:()=>i});var s=a(19510);a(71159);let i={title:"Rapor Digital"};function r({children:e}){return s.jsx("html",{lang:"id",children:s.jsx("body",{children:e})})}}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[276,471],()=>a(68440));module.exports=s})();