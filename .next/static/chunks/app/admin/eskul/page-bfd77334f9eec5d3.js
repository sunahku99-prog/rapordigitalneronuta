(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[149],{423:function(e,t,n){Promise.resolve().then(n.bind(n,9726))},9726:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var a=n(7437),i=n(2265),l=n(9435);function s(){let[e,t]=(0,i.useState)([]),[n,s]=(0,i.useState)(""),[o,d]=(0,i.useState)(""),[r,u]=(0,i.useState)(null);async function c(){let e=await (0,l.S)("/api/admin/eskul");t((await e.json()).eskul||[])}async function h(){if(!n||!o)return alert("Isi kode & nama eskul");if(r){if(!(await (0,l.S)("/api/admin/eskul",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r,code:n,name:o})})).ok)return alert("Gagal update")}else if(!(await (0,l.S)("/api/admin/eskul",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:n,name:o})})).ok)return alert("Gagal tambah");s(""),d(""),u(null),c()}async function f(e){if(confirm("Hapus eskul?")){if(!(await (0,l.S)("/api/admin/eskul",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})})).ok)return alert("Gagal hapus");c()}}return(0,i.useEffect)(()=>{c()},[]),(0,a.jsxs)("div",{style:{padding:24},children:[(0,a.jsx)("h2",{children:"Pengelola Ekstrakurikuler"}),(0,a.jsxs)("div",{style:{display:"flex",gap:8,margin:"12px 0"},children:[(0,a.jsx)("input",{placeholder:"Kode (ex: PRM)",value:n,onChange:e=>s(e.target.value)}),(0,a.jsx)("input",{placeholder:"Nama Eskul",value:o,onChange:e=>d(e.target.value)}),(0,a.jsx)("button",{onClick:h,children:r?"Update":"Tambah"}),r&&(0,a.jsx)("button",{onClick:()=>{u(null),s(""),d("")},children:"Batal"})]}),(0,a.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{style:{borderBottom:"1px solid #ddd"},children:"Kode"}),(0,a.jsx)("th",{style:{borderBottom:"1px solid #ddd"},children:"Nama"}),(0,a.jsx)("th",{style:{borderBottom:"1px solid #ddd"},children:"Aksi"})]})}),(0,a.jsx)("tbody",{children:e.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{style:{borderBottom:"1px solid #f0f0f0"},children:e.code}),(0,a.jsx)("td",{style:{borderBottom:"1px solid #f0f0f0"},children:e.name}),(0,a.jsxs)("td",{style:{borderBottom:"1px solid #f0f0f0"},children:[(0,a.jsx)("button",{onClick:()=>{u(e.id),s(e.code),d(e.name)},children:"Edit"})," ",(0,a.jsx)("button",{onClick:()=>f(e.id),children:"Hapus"})]})]},e.id))})]})]})}},9435:function(e,t,n){"use strict";async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=localStorage.getItem("token"),a=new Headers(t.headers||{});return n&&a.set("Authorization","Bearer ".concat(n)),fetch(e,{...t,headers:a})}n.d(t,{S:function(){return a}})}},function(e){e.O(0,[971,117,744],function(){return e(e.s=423)}),_N_E=e.O()}]);