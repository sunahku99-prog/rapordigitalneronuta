(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[545],{3048:function(e,t,a){Promise.resolve().then(a.bind(a,9725))},9725:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return i}});var n=a(7437),r=a(2265),s=a(9435);function i(){let[e,t]=(0,r.useState)([]),[a,i]=(0,r.useState)(""),[l,o]=(0,r.useState)(""),[d,u]=(0,r.useState)(""),[c,h]=(0,r.useState)(null);async function p(){let e=await (0,s.S)("/api/admin/teachers");t((await e.json()).teachers||[])}async function f(){if(!a||!l)return alert("Isi nama & email");if(c){if(!(await (0,s.S)("/api/admin/teachers",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({teacherId:c,name:a,email:l,password:d||void 0})})).ok)return alert("Gagal update")}else if(!(await (0,s.S)("/api/admin/teachers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,email:l,password:d||"guru123"})})).ok)return alert("Gagal tambah");i(""),o(""),u(""),h(null),p()}async function m(e){if(confirm("Hapus guru beserta akun?")){if(!(await (0,s.S)("/api/admin/teachers",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({teacherId:e})})).ok)return alert("Gagal hapus");p()}}return(0,r.useEffect)(()=>{p()},[]),(0,n.jsxs)("div",{style:{padding:24},children:[(0,n.jsx)("h2",{children:"Pengelola Guru"}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(4,1fr)",gap:8,margin:"12px 0"},children:[(0,n.jsx)("input",{placeholder:"Nama Guru",value:a,onChange:e=>i(e.target.value)}),(0,n.jsx)("input",{placeholder:"Email",value:l,onChange:e=>o(e.target.value)}),(0,n.jsx)("input",{placeholder:"Password (opsional)",type:"password",value:d,onChange:e=>u(e.target.value)}),(0,n.jsxs)("div",{children:[(0,n.jsx)("button",{onClick:f,children:c?"Update":"Tambah"}),c&&(0,n.jsx)("button",{onClick:()=>{h(null),i(""),o(""),u("")},children:"Batal"})]})]}),(0,n.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{style:{borderBottom:"1px solid #ddd"},children:"Nama"}),(0,n.jsx)("th",{style:{borderBottom:"1px solid #ddd"},children:"Email"}),(0,n.jsx)("th",{style:{borderBottom:"1px solid #ddd"},children:"Aksi"})]})}),(0,n.jsx)("tbody",{children:e.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{style:{borderBottom:"1px solid #f0f0f0"},children:e.user.name}),(0,n.jsx)("td",{style:{borderBottom:"1px solid #f0f0f0"},children:e.user.email}),(0,n.jsxs)("td",{style:{borderBottom:"1px solid #f0f0f0"},children:[(0,n.jsx)("button",{onClick:()=>{h(e.id),i(e.user.name),o(e.user.email),u("")},children:"Edit"})," ",(0,n.jsx)("button",{onClick:()=>m(e.id),children:"Hapus"})]})]},e.id))})]})]})}},9435:function(e,t,a){"use strict";async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=localStorage.getItem("token"),n=new Headers(t.headers||{});return a&&n.set("Authorization","Bearer ".concat(a)),fetch(e,{...t,headers:n})}a.d(t,{S:function(){return n}})}},function(e){e.O(0,[971,117,744],function(){return e(e.s=3048)}),_N_E=e.O()}]);