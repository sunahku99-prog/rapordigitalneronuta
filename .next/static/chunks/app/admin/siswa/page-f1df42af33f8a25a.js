(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[113],{8753:function(e,t,n){Promise.resolve().then(n.bind(n,8296))},8296:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var s=n(7437),a=n(2265),i=n(9435);function d(){let[e,t]=(0,a.useState)([]),[n,d]=(0,a.useState)(""),[o,l]=(0,a.useState)(""),[r,u]=(0,a.useState)(void 0),[c,h]=(0,a.useState)(""),[p,f]=(0,a.useState)(null);async function x(){let e=await (0,i.S)("/api/admin/students");t((await e.json()).students||[])}async function m(){if(!o||!n)return alert("Isi NISN & Nama");if(p){if(!(await (0,i.S)("/api/admin/students",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentId:p,name:n,nisn:o,classId:r,password:c||void 0})})).ok)return alert("Gagal update")}else if(!(await (0,i.S)("/api/admin/students",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n,nisn:o,classId:r,password:c||"siswa123"})})).ok)return alert("Gagal tambah");d(""),l(""),u(void 0),h(""),f(null),x()}async function j(e){if(confirm("Hapus siswa beserta akun?")){if(!(await (0,i.S)("/api/admin/students",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentId:e})})).ok)return alert("Gagal hapus");x()}}return(0,a.useEffect)(()=>{x()},[]),(0,s.jsxs)("div",{style:{padding:24},children:[(0,s.jsx)("h2",{children:"Pengelola Siswa"}),(0,s.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(5,1fr)",gap:8,margin:"12px 0"},children:[(0,s.jsx)("input",{placeholder:"Nama Siswa",value:n,onChange:e=>d(e.target.value)}),(0,s.jsx)("input",{placeholder:"NISN",value:o,onChange:e=>l(e.target.value)}),(0,s.jsx)("input",{placeholder:"ClassId (opsional)",value:null!=r?r:"",onChange:e=>u(e.target.value?Number(e.target.value):void 0)}),(0,s.jsx)("input",{placeholder:"Password (opsional)",type:"password",value:c,onChange:e=>h(e.target.value)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("button",{onClick:m,children:p?"Update":"Tambah"}),p&&(0,s.jsx)("button",{onClick:()=>{f(null),d(""),l(""),u(void 0),h("")},children:"Batal"})]})]}),(0,s.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{style:{borderBottom:"1px solid #ddd"},children:"Nama"}),(0,s.jsx)("th",{style:{borderBottom:"1px solid #ddd"},children:"NISN"}),(0,s.jsx)("th",{style:{borderBottom:"1px solid #ddd"},children:"Kelas"}),(0,s.jsx)("th",{style:{borderBottom:"1px solid #ddd"},children:"Aksi"})]})}),(0,s.jsx)("tbody",{children:e.map(e=>{var t;return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{style:{borderBottom:"1px solid #f0f0f0"},children:e.user.name}),(0,s.jsx)("td",{style:{borderBottom:"1px solid #f0f0f0"},children:e.nisn}),(0,s.jsx)("td",{style:{borderBottom:"1px solid #f0f0f0"},children:(null===(t=e.class)||void 0===t?void 0:t.name)||"-"}),(0,s.jsxs)("td",{style:{borderBottom:"1px solid #f0f0f0"},children:[(0,s.jsx)("button",{onClick:()=>{var t;f(e.id),d(e.user.name),l(e.nisn),u(null===(t=e.class)||void 0===t?void 0:t.id),h("")},children:"Edit"})," ",(0,s.jsx)("button",{onClick:()=>j(e.id),children:"Hapus"})]})]},e.id)})})]})]})}},9435:function(e,t,n){"use strict";async function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=localStorage.getItem("token"),s=new Headers(t.headers||{});return n&&s.set("Authorization","Bearer ".concat(n)),fetch(e,{...t,headers:s})}n.d(t,{S:function(){return s}})}},function(e){e.O(0,[971,117,744],function(){return e(e.s=8753)}),_N_E=e.O()}]);