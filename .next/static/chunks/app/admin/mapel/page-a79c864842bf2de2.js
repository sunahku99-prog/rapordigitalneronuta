(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[425],{9004:function(e,t,n){Promise.resolve().then(n.bind(n,9831))},9831:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var a=n(7437),i=n(2265),s=n(9435);function o(){let[e,t]=(0,i.useState)([]),[n,o]=(0,i.useState)(""),[d,l]=(0,i.useState)(""),[r,c]=(0,i.useState)(null);async function u(){let e=await (0,s.S)("/api/admin/subjects");t((await e.json()).subjects||[])}async function h(){if(!n||!d)return alert("Isi kode & nama");if(r){if(!(await (0,s.S)("/api/admin/subjects",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r,code:n,name:d})})).ok)return alert("Gagal update")}else if(!(await (0,s.S)("/api/admin/subjects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:n,name:d})})).ok)return alert("Gagal tambah");o(""),l(""),c(null),u()}async function p(e){if(confirm("Hapus mapel?")){if(!(await (0,s.S)("/api/admin/subjects",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})})).ok)return alert("Gagal hapus");u()}}return(0,i.useEffect)(()=>{u()},[]),(0,a.jsxs)("div",{style:{padding:24},children:[(0,a.jsx)("h2",{children:"Pengelola Mapel"}),(0,a.jsxs)("div",{style:{display:"flex",gap:8,margin:"12px 0"},children:[(0,a.jsx)("input",{placeholder:"Kode (ex: MAT)",value:n,onChange:e=>o(e.target.value)}),(0,a.jsx)("input",{placeholder:"Nama Mapel",value:d,onChange:e=>l(e.target.value)}),(0,a.jsx)("button",{onClick:h,children:r?"Update":"Tambah"}),r&&(0,a.jsx)("button",{onClick:()=>{c(null),o(""),l("")},children:"Batal"})]}),(0,a.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{style:{borderBottom:"1px solid #ddd"},children:"Kode"}),(0,a.jsx)("th",{style:{borderBottom:"1px solid #ddd"},children:"Nama"}),(0,a.jsx)("th",{style:{borderBottom:"1px solid #ddd"},children:"Aksi"})]})}),(0,a.jsx)("tbody",{children:e.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{style:{borderBottom:"1px solid #f0f0f0"},children:e.code}),(0,a.jsx)("td",{style:{borderBottom:"1px solid #f0f0f0"},children:e.name}),(0,a.jsxs)("td",{style:{borderBottom:"1px solid #f0f0f0"},children:[(0,a.jsx)("button",{onClick:()=>{c(e.id),o(e.code),l(e.name)},children:"Edit"})," ",(0,a.jsx)("button",{onClick:()=>p(e.id),children:"Hapus"})]})]},e.id))})]})]})}},9435:function(e,t,n){"use strict";async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=localStorage.getItem("token"),a=new Headers(t.headers||{});return n&&a.set("Authorization","Bearer ".concat(n)),fetch(e,{...t,headers:a})}n.d(t,{S:function(){return a}})}},function(e){e.O(0,[971,117,744],function(){return e(e.s=9004)}),_N_E=e.O()}]);